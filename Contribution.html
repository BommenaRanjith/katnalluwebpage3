<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Contribute</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body {
  font-family: Arial;
  background: #fff3e6;
  padding: 20px;
}
.card {
  max-width: 420px;
  background: white;
  padding: 20px;
  border-radius: 15px;
  margin: auto;
}
.gift {
  display: flex;
  justify-content: space-between;
  margin: 10px 0;
}
button {
  background: orange;
  border: none;
  padding: 8px 12px;
  border-radius: 8px;
  color: white;
}
</style>
</head>

<body>
<div class="card" id="content"></div>

<script>
const params = new URLSearchParams(window.location.search);
const raw = params.get("data");

if (!raw) {
  document.body.innerHTML = "Invalid link";
} else {
  const data = JSON.parse(decodeURIComponent(raw));
  let html = `
    <h2>${data.occasion}</h2>
    <p>Date: ${data.date}</p>
    <p>UPI: ${data.upi}</p>
    <hr>
  `;

  data.gifts.forEach(g => {
    html += `
      <div class="gift">
        <div>${g.name} – ₹${g.amount}</div>
        <button onclick="pay('${data.upi}',${g.amount})">Contribute</button>
      </div>
    `;
  });

  document.getElementById("content").innerHTML = html;
}

function pay(upi, amount) {
  const url = `upi://pay?pa=${upi}&am=${amount}&cu=INR`;
  window.location.href = url;
}
</script>
</body>
</html>
